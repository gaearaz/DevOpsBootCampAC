pool:
  vmImage: 'ubuntu-latest'

variables:
  - name: BuildConfiguration
    value: "release"

steps:
  - checkout: self

  - task: UseDotNet@2 # Ref: https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/use-dotnet-v2?view=azure-pipelines
    displayName: Acquire .Net Version
    inputs:
      version: '6.x'
      packageType: 'sdk'

  - task: DotNetCoreCLI@2
    displayName: .Net Dependencies Restore
    inputs:
      command: 'restore'
      projects: '**/*.csproj'
    
  - task: DotNetCoreCLI@2 # https://learn.microsoft.com/en-us/azure/devops/pipelines/tasks/reference/dotnet-core-cli-v2?view=azure-pipelines
    displayName: .Net Build
    inputs:
      command: 'build'
      projects: '**/*.csproj'
      arguments: '--configuration $(BuildConfiguration)'

  - task: DotNetCoreCLI@2
    displayName: .Net Test
    inputs:
      command: 'test'
      projects: '**/*Test.csproj' #The .csproj test file must be different than main .csproj file!
      